<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>

<body>
    <script>
       
        
        let computerSelection = "";
        let userSelection = "";
        
        function computerPlay() {
            let randomNumber = Math.floor(Math.random() * 3);
            if (randomNumber === 0) {
                computerSelection = 'rock';
            } else if (randomNumber === 1) {
                computerSelection = 'paper';
            } else if (randomNumber === 2) {
                computerSelection = 'scissors';
            } else {
                console.log('something has gone wrong');
            }
            return computerSelection;
        }

        let userTotal = 0;
        let computerTotal = 0;
        
        
        function playRound(userSelection, computerSelection) {
            if (userSelection === computerSelection) {
                console.log('It\'s a tie. Play again');
            } 
              
              else if (computerSelection === 'rock') {
                if (userSelection === 'paper') {
                    console.log('You win this round');
                    return userTotal += 1;
                } else if (userSelection === 'scissors') {
                    console.log('The computer wins this round');
                    return computerTotal += 1;
                } else {
                    console.log('Choose either rock, paper, or scissors');
                }
            } 

              else if (computerSelection === 'paper') {
                if (userSelection === 'rock') {
                    console.log('The computer wins this round');
                    return computerTotal += 1;
                } else if (userSelection === 'scissors') {
                    console.log('You win this round');
                    return userTotal += 1;
                } else {
                    console.log('Choose either rock, paper, or scissors');
                }
            } 
              
              else if (computerSelection === 'scissors') {
                if (userSelection === 'rock') {
                    console.log('You win this round');
                    return userTotal += 1;
                } else if (userSelection === 'paper') {
                    console.log('The computer wins this round');
                    return computerTotal += 1;
                } else {
                    console.log('Choose either rock, paper, or scissors');
                }
            } else {
                console.log('something has gone wrong');
            }
        }

       
        

       function game() {            
            do {
               userSelection = prompt("Choose rock, paper, or scissors", "");
               userSelection = userSelection.toLowerCase();
               computerSelection = computerPlay();
               playRound(userSelection, computerSelection);
               
               console.log(computerSelection);
               console.log(userTotal);
               console.log(computerTotal);
            }
            while (userTotal < 3 && computerTotal < 3);
            
            if (userTotal == 3) {
                   console.log('You win the game!');
            } else if (computerTotal == 3) {
                   console.log('The computer wins the game!')
            } else {
                   console.log('Something went wrong');
            }
           
        }

        game();
 
       /* Option to restart match. */

    </script>
</body>

</html>